(function(e){function t(t){for(var n,u,i=t[0],r=t[1],b=t[2],s=0,p=[];s<i.length;s++)u=i[s],Object.prototype.hasOwnProperty.call(c,u)&&c[u]&&p.push(c[u][0]),c[u]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);o&&o(t);while(p.length)p.shift()();return a.push.apply(a,b||[]),l()}function l(){for(var e,t=0;t<a.length;t++){for(var l=a[t],n=!0,i=1;i<l.length;i++){var r=l[i];0!==c[r]&&(n=!1)}n&&(a.splice(t--,1),e=u(u.s=l[0]))}return e}var n={},c={app:0},a=[];function u(t){if(n[t])return n[t].exports;var l=n[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,u),l.l=!0,l.exports}u.m=e,u.c=n,u.d=function(e,t,l){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(u.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(l,n,function(t){return e[t]}.bind(null,n));return l},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],r=i.push.bind(i);i.push=t,i=i.slice();for(var b=0;b<i.length;b++)t(i[b]);var o=r;a.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"1aa5":function(e,t,l){"use strict";l("b99c")},"56d7":function(e,t,l){"use strict";l.r(t);l("e623"),l("e379"),l("5dc8"),l("37e1");var n=l("7a23");function c(e,t,l,c,a,u){var i=Object(n["K"])("el-header"),r=Object(n["K"])("router-view"),b=Object(n["K"])("el-main"),o=Object(n["K"])("el-footer"),s=Object(n["K"])("el-container");return Object(n["D"])(),Object(n["i"])("div",{id:"app",class:"common-layout",onContextmenu:t[1]||(t[1]=Object(n["cb"])((function(){}),["prevent"]))},[Object(n["m"])(s,null,{default:Object(n["Z"])((function(){return[Object(n["m"])(i,{style:{"font-weight":"700","font-size":"18px"}},{default:Object(n["Z"])((function(){return[Object(n["l"])(Object(n["O"])(a.mseeage.title),1)]})),_:1}),Object(n["m"])(b,null,{default:Object(n["Z"])((function(){return[Object(n["m"])(r)]})),_:1}),Object(n["m"])(o,null,{default:Object(n["Z"])((function(){return[Object(n["l"])(Object(n["O"])(a.mseeage.footer),1)]})),_:1})]})),_:1})],32)}var a={name:"App",data:function(){return{mseeage:{title:"突发事件本体模型与知识图谱的构建设计与实现——数据标注系统",footer:"地址：河南省平顶山市新城区龙翔大道  河南城建学院版权所有"}}}};l("8bf3");a.render=c;var u=a,i=l("6c02"),r={id:"text_label"},b=Object(n["m"])("i",{class:"el-icon-s-opportunity"},"标注规则",-1),o=Object(n["l"])(" 标注方式：BIO标注（其中B代表Begin，指代实体的开始，I代表Inner，指代实体内部，O代表Other，指代不属于实体的字） "),s=Object(n["m"])("br",null,null,-1),p=Object(n["l"])("标点符号一律标注为O "),j=Object(n["m"])("br",null,null,-1),O=Object(n["l"])("实体种类："),d=Object(n["m"])("br",null,null,-1),f=Object(n["l"])("时间—TIME "),_=Object(n["m"])("br",null,null,-1),h=Object(n["l"])("地点—LOC "),m=Object(n["m"])("br",null,null,-1),g=Object(n["l"])("人物—PER "),y=Object(n["m"])("br",null,null,-1),v=Object(n["l"])("机构/组织—ORG "),x=Object(n["m"])("br",null,null,-1),w=Object(n["l"])("结果—RES "),Z=Object(n["l"])("开始标注"),k=Object(n["l"])("撤回"),S=Object(n["l"])("下一篇"),C=Object(n["l"])("退出当前文本标注"),K=Object(n["m"])("i",{class:"el-icon-s-home"},"原文",-1),L={style:{width:"95%"}},P=Object(n["l"])(" 鼠标左击可建立关系"),M=Object(n["m"])("br",null,null,-1),E=Object(n["l"])("鼠标右键可以取消当前“SPO”标注 "),I=Object(n["m"])("br",null,null,-1),R=Object(n["l"])("不再提示"),D=Object(n["l"])(" 移除 ");function T(e,t,l,c,a,u){var i=Object(n["K"])("el-row"),T=Object(n["K"])("el-card"),N=Object(n["K"])("el-button"),V=Object(n["K"])("el-col"),B=Object(n["K"])("el-tag"),$=Object(n["K"])("el-tooltip"),z=Object(n["K"])("el-skeleton"),A=Object(n["K"])("el-table-column"),F=Object(n["K"])("el-table"),G=Object(n["K"])("el-radio-button"),U=Object(n["K"])("el-radio-group"),J=Object(n["K"])("el-option"),W=Object(n["K"])("el-select");return Object(n["D"])(),Object(n["i"])("div",r,[Object(n["m"])(T,null,{default:Object(n["Z"])((function(){return[Object(n["m"])(i,null,{default:Object(n["Z"])((function(){return[b]})),_:1}),Object(n["m"])(i,null,{default:Object(n["Z"])((function(){return[o,s,p,j,O,d,f,_,h,m,g,y,v,x,w]})),_:1})]})),_:1}),Object(n["m"])(T,null,{default:Object(n["Z"])((function(){return[Object(n["m"])(i,null,{default:Object(n["Z"])((function(){return[Object(n["m"])(V,{span:10},{default:Object(n["Z"])((function(){return[Object(n["m"])(N,{onClick:u.updateText},{default:Object(n["Z"])((function(){return[Z]})),_:1},8,["onClick"]),Object(n["m"])(N,{onClick:u.cancelLabel},{default:Object(n["Z"])((function(){return[k]})),_:1},8,["onClick"]),Object(n["m"])(N,{onClick:u.saveAndNext},{default:Object(n["Z"])((function(){return[S]})),_:1},8,["onClick"]),Object(n["m"])(N,{onClick:u.resetLabelFlag},{default:Object(n["Z"])((function(){return[C]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),Object(n["m"])(i,{gutter:20},{default:Object(n["Z"])((function(){return[K]})),_:1}),Object(n["m"])(z,{rows:1,loading:a.loading,animated:""},{default:Object(n["Z"])((function(){return[Object(n["m"])(i,{gutter:20,onMouseup:u.handleMouseSelect,type:"flex",justify:"center"},{default:Object(n["Z"])((function(){return[Object(n["m"])("span",L,[(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["I"])(a.abstract_label,(function(e){return Object(n["D"])(),Object(n["i"])("span",{key:e.word},[Object(n["m"])(B,null,{default:Object(n["Z"])((function(){return[Object(n["l"])(Object(n["O"])(e.word),1)]})),_:2},1024),Object(n["m"])($,{disabled:a.tooltip_disabled,placement:"bottom",effect:"light"},{content:Object(n["Z"])((function(){return[P,M,E,I,Object(n["m"])(N,{type:"text",size:"mini",onClick:t[1]||(t[1]=function(e){return a.tooltip_disabled=!a.tooltip_disabled})},{default:Object(n["Z"])((function(){return[R]})),_:1})]})),default:Object(n["Z"])((function(){return[Object(n["m"])(N,{id:"verb_list",size:"small",type:null==a.button_type?"":"success",onMousedown:function(t){return u.verb_choose(e.word,t)}},{default:Object(n["Z"])((function(){return[Object(n["l"])(Object(n["O"])(e.pos),1)]})),_:2},1032,["type","onMousedown"])]})),_:2},1032,["disabled"])])})),128)),Object(n["l"])(" "+Object(n["O"])(a.text),1)])]})),_:1},8,["onMouseup"])]})),_:1},8,["loading"])]})),_:1}),Object(n["m"])(T,null,{default:Object(n["Z"])((function(){return[Object(n["m"])(i,{gutter:20},{default:Object(n["Z"])((function(){return[Object(n["m"])(V,{span:12},{default:Object(n["Z"])((function(){return[Object(n["m"])(F,{data:a.table_data,height:"160",border:"",style:{width:"100%"}},{default:Object(n["Z"])((function(){return[Object(n["m"])(A,{prop:"text_pre",label:"标注字段"}),Object(n["m"])(A,{prop:"text_label",label:"标注结果"})]})),_:1},8,["data"])]})),_:1}),Object(n["m"])(V,{span:12},{default:Object(n["Z"])((function(){return[Object(n["m"])(F,{data:a.spo_list,height:"160",border:"",style:{width:"100%"}},{default:Object(n["Z"])((function(){return[Object(n["m"])(A,{prop:"predicate",label:"谓语(P)"}),Object(n["m"])(A,{prop:"object",label:"宾语(O)"}),Object(n["m"])(A,{prop:"subject",label:"主语(S)"}),Object(n["m"])(A,{fixed:"right",label:"操作",width:"120"},{default:Object(n["Z"])((function(e){return[Object(n["m"])(N,{onClick:Object(n["cb"])((function(t){return u.deleteRow(e.$index,a.spo_list)}),["prevent"]),type:"text",size:"small"},{default:Object(n["Z"])((function(){return[D]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1})]})),_:1}),Object(n["ab"])(Object(n["m"])(U,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.value=e}),placeholder:"请选择"},{default:Object(n["Z"])((function(){return[(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["I"])(a.lable_options,(function(e){return Object(n["D"])(),Object(n["i"])(G,{key:e.value,label:e.label,value:e.value,onClick:Object(n["cb"])((function(t){return u.textLabel(e.value)}),["prevent"])},null,8,["label","value","onClick"])})),128))]})),_:1},8,["modelValue"]),[[n["W"],null==a.flag?a.show:!a.show]]),Object(n["ab"])(Object(n["m"])(W,{modelValue:a.value,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.value=e}),placeholder:"请选择"},{default:Object(n["Z"])((function(){return[(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["I"])(a.predicate_options,(function(e){return Object(n["D"])(),Object(n["i"])(J,{key:e.value,label:e.label,value:e.value,onClick:Object(n["cb"])((function(t){return u.preLabel(e.value)}),["prevent"])},null,8,["label","value","onClick"])})),128))]})),_:1},8,["modelValue"]),[[n["W"],null==a.predicate?a.show:!a.show]])])}l("a434"),l("b64b"),l("d3b7"),l("25f0");var N=l("3fd4"),V={data:function(){return{show:!1,loading:!0,tooltip_disabled:!1,end:0,bagin:0,text_height:0,flag:null,text:null,value:null,abstract:null,text_pre:null,predicate:null,text_label:null,button_type:null,spo_dict:{},spo_list:[],table_data:[],abstract_label:[],lable_options:[{value:"LOC",label:"LOC"},{value:"RES",label:"RES"},{value:"TIME",label:"TIME"},{value:"PER",label:"PER"},{value:"ORG",label:"ORG"},{value:"O",label:"O"}],predicate_options:[{value:{object_type:"地点",predicate:"祖籍",subject_type:"人物"},label:"祖籍"},{value:{object_type:"人物",predicate:"父亲",subject_type:"人物"},label:"父亲"},{value:{object_type:"地点",predicate:"总部地点",subject_type:"企业"},label:"总部地点"},{value:{object_type:"地点",predicate:"出生地",subject_type:"人物"},label:"出生地"},{value:{object_type:"Number",predicate:"面积",subject_type:"行政区"},label:"面积"},{value:{object_type:"Text",predicate:"简称",subject_type:"机构"},label:"简称"},{value:{object_type:"人物",predicate:"作者",subject_type:"图书作品"},label:"作者"},{value:{object_type:"Date",predicate:"成立日期",subject_type:"企业"},label:"成立日期"},{value:{object_type:"Date",predicate:"出生日期",subject_type:"人物"},label:"出生日期"},{value:{object_type:"城市",predicate:"首都",subject_type:"国家"},label:"首都"},{value:{object_type:"Number",predicate:"身高",subject_type:"人物"},label:"身高"}]}},methods:{updateText:function(){var e=this;null==this.text?this.$axios.get("/api/get_text").then((function(t){e.abstract=e.text=t.data.abstract,e.loading=!1})).catch((function(e){N["a"].warning({message:e,type:"warning",center:!0})})):N["a"].warning({message:"标注未完成，请完成标注后点击继续下一条标注或退出此次标注！！！",type:"warning",center:!0})},cancelLabel:function(){if(0!=this.abstract_label.length){this.table_data.pop();var e=this.abstract_label.pop();this.text=e.word+this.text,N["a"].success({message:'取消"'+e.word+'"的标记',type:"success",center:!0})}else N["a"].warning({message:"没有被标注文本！！！",type:"warning",center:!0})},saveAndNext:function(){var e=this;null==this.text?N["a"].warning({message:"未开始文本标注，不需要保存！！！",type:"warning",center:!0}):0==this.text.length&&null!=this.text?this.$axios.post("/api/saveAndNext",{abstract:this.abstract,abstract_label:{postag:this.abstract_label,spo_list:this.spo_list}}).then((function(t){e.end=0,e.bagin=0,e.text=null,e.flag=null,e.spo_dict=null,e.text_pre=null,e.abstract=null,e.text_label=null,e.spo_list=[],e.table_data=[],e.abstract_label=[],e.abstract=e.text=t.data.abstract,e.loading=!1})).catch((function(e){N["a"].warning({message:e,type:"warning",center:!0})})):N["a"].warning({message:"标注未完成，请完成标注后进行保存！！！",type:"warning",center:!0})},resetLabelFlag:function(){var e=this;null!=this.abstract?this.$axios.post("/api/reset_label_flag",{abstract:this.abstract}).then((function(t){e.end=0,e.bagin=0,e.text=null,e.flag=null,e.spo_dict=null,e.text_pre=null,e.abstract=null,e.text_label=null,e.spo_list=[],e.table_data=[],e.abstract_label=[],e.abstract=e.text=t.data.abstract,e.loading=!0,N["a"].success({message:"当前待标注文本已被重置！！！",type:"success"})})).catch((function(e){N["a"].error({message:e,type:"error",center:!0})})):N["a"].warning({message:"没有读取任何文本，没有文本被重置！！！",type:"warning",center:!0})},handleMouseSelect:function(e){if(window.getSelection().toString().length>0){this.bagin=window.getSelection().anchorOffset,this.end=window.getSelection().focusOffset,this.text_pre=this.flag=window.getSelection().toString();var t=document.getElementsByClassName("el-radio-group")[0];t.style.position="fixed",t.style.left=String(e.clientX)+"px",t.style.top=String(e.clientY)+"px"}else this.flag=null,this.text_pre=null,this.text_label=null},textLabel:function(e){1==this.bagin?(this.text_label=e,this.text=this.text.substring(this.end-=1),this.abstract_label.push({word:this.flag,pos:e}),this.flag=null,this.table_data.push({text_pre:this.text_pre,text_label:this.text_label})):N["a"].warning({message:"请按照顺序进行标注",type:"warning",center:!0})},preLabel:function(e){e["object"]=this.spo_dict["object_type"],e["subject"]=this.spo_dict["subject_type"],this.spo_list.push(e),this.button_type=null,this.predicate=null,this.spo_dict={}},verb_choose:function(e,t){if(0==t.button)if(0==Object.keys(this.spo_dict))this.spo_dict["subject_type"]=e,this.button_type="success";else{this.predicate=this.spo_dict["object_type"]=e;var l=document.getElementsByClassName("select-trigger")[0];l.style.position="fixed",l.style.left=String(t.clientX)+"px",l.style.top=String(t.clientY)+"px"}else 2==t.button&&(0!=Object.keys(this.spo_dict)?(this.button_type=null,this.predicate=null,this.spo_dict={},N["a"].success({message:"取消当前“SPO”的标记",type:"success",center:!0})):N["a"].warning({message:"没有被标注文本！！！",type:"warning",center:!0}))},deleteRow:function(e,t){t.splice(e,1)}},mounted:function(){this.timer=setInterval(this.resetLabelFlag,3e5),window.onbeforeunload=this.resetLabelFlag},beforeUnmount:function(){clearInterval(this.timer)}};l("1aa5");V.render=T;var B=V,$=[{path:"/",name:"TextLabel",component:B}],z=Object(i["a"])({history:Object(i["b"])("/"),routes:$}),A=z,F=l("5502"),G=Object(F["a"])({state:{},mutations:{},actions:{},modules:{}}),U=l("bc3a"),J=l.n(U),W=(l("7dd6"),l("3ef0")),X=l.n(W),Y=function(e){e.use(N["b"],{locale:X.a})},q=Object(n["h"])(u);q.config.globalProperties.$axios=J.a,q.use(Y),q.use(G),q.use(A),q.mount("#app")},"8bf3":function(e,t,l){"use strict";l("aa0b")},aa0b:function(e,t,l){},b99c:function(e,t,l){}});